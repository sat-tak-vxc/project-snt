<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>aasign_SetCount</name>
        <label>カウント割り当て</label>
        <locationX>1365</locationX>
        <locationY>1204</locationY>
        <assignmentItems>
            <assignToReference>var_Count</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_filter_CancelCollection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>aasign_SetCount2</name>
        <label>カウント割り当て</label>
        <locationX>1342</locationX>
        <locationY>1340</locationY>
        <assignmentItems>
            <assignToReference>var_Count</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_filter_ChangeCollection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Cancel</name>
        <label>解約レコードに割り当て</label>
        <locationX>1009</locationX>
        <locationY>976</locationY>
        <assignmentItems>
            <assignToReference>var_Cancel.RealEstate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_CreateCancelChange.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Cancel.Resident__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_CreateCancelChange.ContractorName__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Cancel.RetireReson__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RetireExpectedPerson.RetireReson__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Cancel.IsRetireExpectedPersonReminder__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formula_IsRetireExpectedPersonReminder</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Count</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Cancel.ChargeTeam__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Account.CancelApplicationTeam__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Cancel.RetireeListArrivalDate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Cancel.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Account.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_CancelCollection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_CancelCollection</name>
        <label>解約コレクションに割り当て</label>
        <locationX>861</locationX>
        <locationY>976</locationY>
        <assignmentItems>
            <assignToReference>varCol_CancelInsert</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_Cancel</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_CreateCancelChange</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Change</name>
        <label>入替レコードに割り当て</label>
        <locationX>1134</locationX>
        <locationY>1403</locationY>
        <assignmentItems>
            <assignToReference>var_Change.RealEstate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_CreateCancelChange.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Change.LeftEmployee__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Contact.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Change.RetireReson__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RetireExpectedPerson.RetireReson__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Change.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_RecordType.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Change.IsRetireExpectedPersonReminder__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formula_IsRetireExpectedPersonReminderChange</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Count</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Change.RetiredPersonListArriveDate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Change.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Account.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_ChangeCollection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_ChangeCollection</name>
        <label>入替レコードコレクションに割り当て</label>
        <locationX>903</locationX>
        <locationY>1403</locationY>
        <assignmentItems>
            <assignToReference>varCol_ChangeInsert</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_Change</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_CreateCancelChange</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_CretaeToDoCancel</name>
        <label>退職日変更アラート割り当て</label>
        <locationX>2187</locationX>
        <locationY>1044</locationY>
        <assignmentItems>
            <assignToReference>var_ToDo.Description</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>text_RetireDateAlert</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ToDo.Subject</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>退職日変更アラート</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ToDo.WhatId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_CreateToDoCancel.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ToDo.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_CreateToDoCancel.ChargeTeam__r.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_ToDoCancel</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_CretaeToDoChange</name>
        <label>退職日変更アラート割り当て</label>
        <locationX>1989</locationX>
        <locationY>1438</locationY>
        <assignmentItems>
            <assignToReference>var_ToDo.Description</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>text_RetireDateAlert</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ToDo.Subject</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>退職日変更アラート</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ToDo.WhatId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_CreateToDoChange.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ToDo.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_CreateToDoChange.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_ToDoChange</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_SetCancels</name>
        <label>既存解約レコードコレクションセット</label>
        <locationX>1808</locationX>
        <locationY>1044</locationY>
        <assignmentItems>
            <assignToReference>varCol_AlertCancel</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>filter_CancelCollection</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>filter_ActiveCancel</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_ToDoCancel</name>
        <label>退職日変更アラートセット</label>
        <locationX>2113</locationX>
        <locationY>929</locationY>
        <assignmentItems>
            <assignToReference>varCol_ToDo</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_ToDo</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ToDo</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>loop_CreateToDoCancel</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_ToDoChange</name>
        <label>退職日変更アラートセット</label>
        <locationX>1842</locationX>
        <locationY>1439</locationY>
        <assignmentItems>
            <assignToReference>varCol_ToDo</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_ToDo</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ToDo</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>loop_CreateToDoChange</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>filter_ActiveCancel</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>未完了解約絞り込み</label>
        <locationX>1927</locationX>
        <locationY>1041</locationY>
        <assignNextValueToReference>currentItem_filter_ActiveCancel_0</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>varCol_AlertCancel</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_filter_ActiveCancel_0.Stage__c</leftValueReference>
            <operator>NotEqualTo</operator>
            <rightValue>
                <stringValue>完了</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>loop_CreateToDoCancel</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>filter_ActiveChange</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>未完了入替絞り込み</label>
        <locationX>1776</locationX>
        <locationY>1325</locationY>
        <assignNextValueToReference>currentItem_filter_ActiveChange</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>filter_ChangeCollection</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_filter_ActiveChange.Stage__c</leftValueReference>
            <operator>NotEqualTo</operator>
            <rightValue>
                <stringValue>完了</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>loop_CreateToDoChange</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>filter_CancelCollection</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>解約コレクション物件絞り込み</label>
        <locationX>1055</locationX>
        <locationY>1112</locationY>
        <assignNextValueToReference>currentItem_filter_CancelCollection_0</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>varCol_Cancel</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_filter_CancelCollection_0.RealEstate__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>loop_CreateCancelChange.Id</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>loop_filter_CancelCollection</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>filter_ChangeCollection</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>入替コレクション物件絞り込み</label>
        <locationX>1050</locationX>
        <locationY>1265</locationY>
        <assignNextValueToReference>currentItem_filter_ChangeCollection_0</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>varCol_Change</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_filter_ChangeCollection_0.RealEstate__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>loop_CreateCancelChange.Id</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>loop_filter_ChangeCollection</targetReference>
        </connector>
    </collectionProcessors>
    <decisions>
        <name>decision_ChangeRetireDateCancel</name>
        <label>退職日変更（解約）</label>
        <locationX>1629</locationX>
        <locationY>1043</locationY>
        <defaultConnector>
            <targetReference>loop_CreateCancelChange</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>ChangeRetireDate</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Contact.RetireDate__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>var_RetireExpectedPerson.RetireDate__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_SetCancels</targetReference>
            </connector>
            <label>退職日変更</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_ChangeRetireDateChange</name>
        <label>退職日変更（入替）</label>
        <locationX>1617</locationX>
        <locationY>1327</locationY>
        <defaultConnector>
            <targetReference>loop_CreateCancelChange</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>ChangeRetireDate2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Contact.RetireDate__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>var_RetireExpectedPerson.RetireDate__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>filter_ActiveChange</targetReference>
            </connector>
            <label>退職日変更</label>
        </rules>
    </decisions>
    <decisions>
        <name>desicion_isCancel</name>
        <label>既存解約レコード確認</label>
        <locationX>1462</locationX>
        <locationY>1045</locationY>
        <defaultConnector>
            <targetReference>decision_ChangeRetireDateCancel</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>NoCancel</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_Count</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_Cancel</targetReference>
            </connector>
            <label>既存解約レコードなし</label>
        </rules>
    </decisions>
    <decisions>
        <name>desicion_isChange</name>
        <label>既存入替レコード確認</label>
        <locationX>1470</locationX>
        <locationY>1272</locationY>
        <defaultConnector>
            <targetReference>decision_ChangeRetireDateChange</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>NoChange</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_Count</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_Change</targetReference>
            </connector>
            <label>既存入替レコードなし</label>
        </rules>
    </decisions>
    <decisions>
        <name>desicion_isChangeCancel</name>
        <label>入替OR解約</label>
        <locationX>860</locationX>
        <locationY>1211</locationY>
        <defaultConnector>
            <targetReference>filter_CancelCollection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>解約</defaultConnectorLabel>
        <rules>
            <name>Change</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>loop_CreateCancelChange.IsChange__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>filter_ChangeCollection</targetReference>
            </connector>
            <label>入替</label>
        </rules>
    </decisions>
    <decisions>
        <name>desicion_isContact</name>
        <label>取引先担当者が存在する</label>
        <locationX>522</locationX>
        <locationY>600</locationY>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>IF1_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Contact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_RealEstate</targetReference>
            </connector>
            <label>取引先担当者が存在する</label>
        </rules>
    </decisions>
    <decisions>
        <name>desicion_Number</name>
        <label>社員番号桁数を検証</label>
        <locationX>522</locationX>
        <locationY>476</locationY>
        <defaultConnector>
            <targetReference>desicion_isContact</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>EmployeeNum_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Account.EmployeeNoDigits__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>formula_RetireNumberCount</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_ErrorTexr</targetReference>
            </connector>
            <label>社員番号桁落ち</label>
        </rules>
    </decisions>
    <description>20220120修正Ver3</description>
    <environments>Default</environments>
    <formulas>
        <name>formula_IsRetireExpectedPersonReminder</name>
        <dataType>String</dataType>
        <expression>if({!loop_CreateCancelChange.ServiceContract__r.RetiredPersonListFilterTarget__c} = TRUE , &quot;データ修正&quot;,
if({!var_RetireExpectedPerson.RetireDate__c} &gt;= today(), &quot;退職日到来済み&quot;, &quot;督促可否確認&quot;))</expression>
    </formulas>
    <formulas>
        <name>formula_IsRetireExpectedPersonReminderChange</name>
        <dataType>String</dataType>
        <expression>if({!loop_CreateCancelChange.ServiceContract__r.RetiredPersonListFilterTarget__c} = TRUE , &quot;データ修正&quot;,
if({!var_RetireExpectedPerson.RetireDate__c} &gt;= today(), &quot;退職日到来済み&quot;, &quot;督促可否確認&quot;))</expression>
    </formulas>
    <formulas>
        <name>formula_RetireNumberCount</name>
        <dataType>Number</dataType>
        <expression>LEN({!var_RetireExpectedPerson.EmployeeNo__c})</expression>
        <scale>2</scale>
    </formulas>
    <interviewLabel>CA_退去申請督促対象者特定 {!$Flow.CurrentDateTime}</interviewLabel>
    <label>CA_退去申請督促対象者特定</label>
    <loops>
        <name>loop_CreateCancelChange</name>
        <label>解約入替作成ループ</label>
        <locationX>727</locationX>
        <locationY>1199</locationY>
        <collectionReference>get_RealEstate</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>desicion_isChangeCancel</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>update_Contact</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_CreateToDoCancel</name>
        <label>退職日変更アラート作成ループ（解約）</label>
        <locationX>2041</locationX>
        <locationY>1041</locationY>
        <collectionReference>filter_ActiveCancel</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_CretaeToDoCancel</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>loop_CreateCancelChange</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_CreateToDoChange</name>
        <label>退職日変更アラート作成ループ（入替）</label>
        <locationX>1899</locationX>
        <locationY>1327</locationY>
        <collectionReference>filter_ActiveChange</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_CretaeToDoChange</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>loop_CreateCancelChange</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_filter_CancelCollection</name>
        <label>既存解約レコード確認ループ</label>
        <locationX>1212</locationX>
        <locationY>1115</locationY>
        <collectionReference>filter_CancelCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>aasign_SetCount</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>desicion_isCancel</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_filter_ChangeCollection</name>
        <label>既存入替レコード確認ループ</label>
        <locationX>1242</locationX>
        <locationY>1275</locationY>
        <collectionReference>filter_ChangeCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>aasign_SetCount2</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>desicion_isChange</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>create_Cancel</name>
        <label>解約レコード作成</label>
        <locationX>590</locationX>
        <locationY>1547</locationY>
        <connector>
            <targetReference>create_Change</targetReference>
        </connector>
        <inputReference>varCol_CancelInsert</inputReference>
    </recordCreates>
    <recordCreates>
        <name>create_Change</name>
        <label>入替レコードを作成</label>
        <locationX>596</locationX>
        <locationY>1703</locationY>
        <connector>
            <targetReference>create_ToDo</targetReference>
        </connector>
        <inputReference>varCol_ChangeInsert</inputReference>
    </recordCreates>
    <recordCreates>
        <name>create_ToDo</name>
        <label>ToDo作成</label>
        <locationX>597</locationX>
        <locationY>1829</locationY>
        <inputReference>varCol_ToDo</inputReference>
    </recordCreates>
    <recordLookups>
        <name>get_Account</name>
        <label>取引先を取得</label>
        <locationX>526</locationX>
        <locationY>219</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Contact</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountId__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_RetireExpectedPerson.AccountId__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Account</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Change</name>
        <label>既に作成されている入替の取得</label>
        <locationX>729</locationX>
        <locationY>889</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_RecordType</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>LeftEmployee__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Contact.Id</elementReference>
            </value>
        </filters>
        <object>Change__c</object>
        <outputReference>varCol_Change</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>RealEstate__c</queriedFields>
        <queriedFields>Stage__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>get_Contact</name>
        <label>取引先担当者を取得</label>
        <locationX>528</locationX>
        <locationY>351</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>desicion_Number</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>EmployeeNum__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_RetireExpectedPerson.EmployeeNo__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>AccountId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Account.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>EmployeeNum__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_CreatedClear</name>
        <label>既に作成されている解約レコードの取得</label>
        <locationX>729</locationX>
        <locationY>741</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Change</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Resident__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Contact.Id</elementReference>
            </value>
        </filters>
        <object>Cancel__c</object>
        <outputReference>varCol_Cancel</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>RealEstate__c</queriedFields>
        <queriedFields>ChargeTeam__c</queriedFields>
        <queriedFields>Stage__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>get_RealEstate</name>
        <label>物件を取得</label>
        <locationX>729</locationX>
        <locationY>607</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_CreatedClear</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ContractorName__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Contact.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>RetiredPersonListExceptTarget__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>IsUnmanaged__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>RealEstate__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_RecordType</name>
        <label>レコードタイプを取得</label>
        <locationX>727</locationX>
        <locationY>1030</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>loop_CreateCancelChange</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Leave</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Change__c</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>update_Contact</name>
        <label>取引先担当者更新</label>
        <locationX>594</locationX>
        <locationY>1418</locationY>
        <connector>
            <targetReference>create_Cancel</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Contact.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>RetireDate__c</field>
            <value>
                <elementReference>var_RetireExpectedPerson.RetireDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RetireReson__c</field>
            <value>
                <elementReference>var_RetireExpectedPerson.RetireReson__c</elementReference>
            </value>
        </inputAssignments>
        <object>Contact</object>
    </recordUpdates>
    <recordUpdates>
        <name>update_ErrorTexr</name>
        <label>エラー項目更新</label>
        <locationX>914</locationX>
        <locationY>462</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_RetireExpectedPerson.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>EmployeeNoError__c</field>
            <value>
                <stringValue>桁落ちエラー</stringValue>
            </value>
        </inputAssignments>
        <object>RetireExpectedPerson__c</object>
    </recordUpdates>
    <start>
        <locationX>400</locationX>
        <locationY>48</locationY>
        <connector>
            <targetReference>get_Account</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>text_RetireDateAlert</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;入居者の退職日が変更されました。詳細を確認してください。&lt;/p&gt;&lt;p&gt;{!get_Contact.RetireDate__c}⇒{!var_RetireExpectedPerson.RetireDate__c}&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>currentItem_filter_ActiveCancel_0</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Cancel__c</objectType>
    </variables>
    <variables>
        <name>currentItem_filter_ActiveChange</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Change__c</objectType>
    </variables>
    <variables>
        <name>currentItem_filter_CancelCollection_0</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Cancel__c</objectType>
    </variables>
    <variables>
        <name>currentItem_filter_ChangeCollection_0</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Change__c</objectType>
    </variables>
    <variables>
        <name>var_Cancel</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Cancel__c</objectType>
    </variables>
    <variables>
        <name>var_Change</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Change__c</objectType>
    </variables>
    <variables>
        <name>var_Count</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>var_RetireExpectedPerson</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>RetireExpectedPerson__c</objectType>
    </variables>
    <variables>
        <name>var_ToDo</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Task</objectType>
    </variables>
    <variables>
        <name>varCol_AlertCancel</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Cancel__c</objectType>
    </variables>
    <variables>
        <name>varCol_Cancel</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Cancel__c</objectType>
    </variables>
    <variables>
        <name>varCol_CancelInsert</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Cancel__c</objectType>
    </variables>
    <variables>
        <name>varCol_Change</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Change__c</objectType>
    </variables>
    <variables>
        <name>varCol_ChangeInsert</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Change__c</objectType>
    </variables>
    <variables>
        <name>varCol_ToDo</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Task</objectType>
    </variables>
</Flow>
