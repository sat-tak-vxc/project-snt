<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>assign_VariableAgency</name>
        <label>変数に割りあて</label>
        <locationX>712</locationX>
        <locationY>679</locationY>
        <assignmentItems>
            <assignToReference>var_AgAgencyName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_AgencyName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AgContractStartDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_ContractStartDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AgRealEstateName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RealEstateName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AgRoomNum</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RoomNum</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_EmAgencyName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_NewMatter.DecisionAgencyName__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_EmContractStartDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_NewMatter.DecisionContractStartDate__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_EmRealEstateName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_NewMatter.DecisionRealEstateName__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_EmRoomNum</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_NewMatter.DecisionRoom__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>decision_Difference</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_VariableEmployee</name>
        <label>変数に割りあて</label>
        <locationX>446</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>var_EmAgencyName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_AgencyName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_EmContractStartDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_ContractStartDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_EmRealEstateName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RealEstateName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_EmRoomNum</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RoomNum</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AgAgencyName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_NewMatter.DecisionAgencyName__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AgContractStartDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_NewMatter.DecisionContractStartDate__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AgRealEstateName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_NewMatter.DecisionRealEstateName__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AgRoomNum</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_NewMatter.DecisionRoom__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>decision_Difference</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>decision_DecisionParson</name>
        <label>決定者判定</label>
        <locationX>577</locationX>
        <locationY>532</locationY>
        <defaultConnector>
            <targetReference>assign_VariableEmployee</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>社員連絡</defaultConnectorLabel>
        <rules>
            <name>isAgency</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_IsAgency</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_VariableAgency</targetReference>
            </connector>
            <label>不動産会社連絡</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_DecisionParson2</name>
        <label>決定者判定</label>
        <locationX>831</locationX>
        <locationY>358</locationY>
        <defaultConnectorLabel>社員連絡</defaultConnectorLabel>
        <rules>
            <name>isAgency2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_IsAgency</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>不動産会社連絡</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_Difference</name>
        <label>差分判定</label>
        <locationX>583</locationX>
        <locationY>824</locationY>
        <defaultConnector>
            <targetReference>create_ToDo</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>差分あり</defaultConnectorLabel>
        <rules>
            <name>isNotDifference</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_AgAgencyName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>var_EmAgencyName</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>var_AgContractStartDate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>var_EmContractStartDate</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>var_AgRealEstateName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>var_EmRealEstateName</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>var_AgRoomNum</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>var_EmRoomNum</elementReference>
                </rightValue>
            </conditions>
            <label>差分なし</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_Existing</name>
        <label>既存連絡判定</label>
        <locationX>572</locationX>
        <locationY>351</locationY>
        <defaultConnector>
            <targetReference>decision_DecisionParson2</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>既存連絡なし</defaultConnectorLabel>
        <rules>
            <name>isExisting</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_NewMatter.DecisionRealEstateName__c</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <conditions>
                <leftValueReference>get_NewMatter.DecisionRealEstateRoom__c</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <connector>
                <targetReference>decision_DecisionParson</targetReference>
            </connector>
            <label>既存連絡あり</label>
        </rules>
    </decisions>
    <interviewLabel>決定物件登録不一致チェック {!$Flow.CurrentDateTime}</interviewLabel>
    <label>NM_決定物件登録不一致チェック</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>create_ToDo</name>
        <label>ToDoを作成</label>
        <locationX>591</locationX>
        <locationY>997</locationY>
        <inputAssignments>
            <field>Description</field>
            <value>
                <elementReference>text_Description</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Setup.SyatakusanSetting__c.SystemUserId__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>決定物件登録確認</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>get_NewMatter</name>
        <label>新規を取得</label>
        <locationX>584</locationX>
        <locationY>216</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>decision_Existing</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NewMatter__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <start>
        <locationX>458</locationX>
        <locationY>48</locationY>
        <connector>
            <targetReference>get_NewMatter</targetReference>
        </connector>
    </start>
    <status>Draft</status>
    <textTemplates>
        <name>text_Description</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>決定物件登録で、不動産会社と社員の入力内容が一致しませんでした。
内容を確認してください。

【仲介会社名】
不動産会社：{!var_AgAgencyName}
社員：{!var_EmAgencyName}
【物件名】
不動産会社：{!var_AgRealEstateName}
社員：{!var_EmRealEstateName}
【部屋番号】
不動産会社：{!var_AgRoomNum}
社員：{!var_EmRoomNum}
【契約開始日】
不動産会社：{!var_AgContractStartDate}
社員：{!var_EmContractStartDate}</text>
    </textTemplates>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_AgAgencyName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_AgContractStartDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_AgencyAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_AgencyName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_AgRealEstateName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_AgRoomNum</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_ContractStartDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_EmAgencyName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_EmContractStartDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_EmRealEstateName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_EmRoomNum</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_IsAgency</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>var_RealEstateName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_RoomNum</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_TemplateName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_UserAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
