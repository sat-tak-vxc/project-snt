<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>assign_Collection1</name>
        <label>変数に割りあて</label>
        <locationX>540</locationX>
        <locationY>2078</locationY>
        <assignmentItems>
            <assignToReference>varCol_RentDetail</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_RentDetail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Collection2</name>
        <label>変数に割りあて</label>
        <locationX>540</locationX>
        <locationY>2571</locationY>
        <assignmentItems>
            <assignToReference>varCol_RentDetail</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_RentDetail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Collection3</name>
        <label>変数に割りあて</label>
        <locationX>534</locationX>
        <locationY>3083</locationY>
        <assignmentItems>
            <assignToReference>varCol_RentDetail</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_RentDetail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail3</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_CountUp</name>
        <label>カウントアップ</label>
        <locationX>804</locationX>
        <locationY>926</locationY>
        <assignmentItems>
            <assignToReference>var_LoopCount</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>decision_LoopCount</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Id1</name>
        <label>ID1割り当て</label>
        <locationX>540</locationX>
        <locationY>1166</locationY>
        <assignmentItems>
            <assignToReference>var_PaymentOrBillingSettingId1</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_BankAccountId1</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.RemittanceDestination__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_PaymentOrBillingSettingIdAssign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Id2</name>
        <label>ID2割り当て</label>
        <locationX>804</locationX>
        <locationY>1166</locationY>
        <assignmentItems>
            <assignToReference>var_PaymentOrBillingSettingId2</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_BankAccountId2</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.RemittanceDestination__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_PaymentOrBillingSettingIdAssign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Id3</name>
        <label>ID3割り当て</label>
        <locationX>1068</locationX>
        <locationY>1166</locationY>
        <assignmentItems>
            <assignToReference>var_PaymentOrBillingSettingId3</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_BankAccountId3</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.RemittanceDestination__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_PaymentOrBillingSettingIdAssign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_RentDetail1</name>
        <label>変数に割りあて</label>
        <locationX>540</locationX>
        <locationY>1958</locationY>
        <assignmentItems>
            <assignToReference>var_RentDetail.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail1.Amount__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.HandlingType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>振込</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.CostCategory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail1.CostCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.BankAccount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_BankAccountId1</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItem__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail1.ExpenseItem__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.Rent__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RentId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.SeasonVariableCostOccurrenceMonth__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail1.SeasonVariableCostOccurrenceMonth__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.TaxRate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formula_TaxRateLoop1</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItemName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail1.ExpenseItemsName__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_Collection1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_RentDetail2</name>
        <label>変数に割りあて</label>
        <locationX>540</locationX>
        <locationY>2451</locationY>
        <assignmentItems>
            <assignToReference>var_RentDetail.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.Amount__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.HandlingType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>振込</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.CostCategory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.CostCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.BankAccount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_BankAccountId2</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItem__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.ExpenseItem__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.Rent__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RentId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.SeasonVariableCostOccurrenceMonth__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.SeasonVariableCostOccurrenceMonth__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.TaxRate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formula_TaxRateLoop2</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItemName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.ExpenseItemsName__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_Collection2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_RentDetail3</name>
        <label>変数に割りあて</label>
        <locationX>534</locationX>
        <locationY>2962</locationY>
        <assignmentItems>
            <assignToReference>var_RentDetail.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail3.Amount__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.HandlingType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>振込</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.CostCategory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail3.CostCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.BankAccount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_BankAccountId3</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItem__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail3.ExpenseItem__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.Rent__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RentId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.SeasonVariableCostOccurrenceMonth__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail3.SeasonVariableCostOccurrenceMonth__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.TaxRate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formula_TaxRateLoop3</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItemName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail3.ExpenseItemsName__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_Collection3</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_RentIdForPOBS</name>
        <label>家賃割り当て</label>
        <locationX>659</locationX>
        <locationY>3588</locationY>
        <assignmentItems>
            <assignToReference>loop_PaymentOrBillingSetting.Rent__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RentId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varCol_PaymentOrBillingSetting</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSetting</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_PaymentOrBillingSetting</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>filter_PaymentOrBillingSettingDetail1</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>支払/請求設定明細をフィルタ</label>
        <locationX>452</locationX>
        <locationY>1718</locationY>
        <assignNextValueToReference>currentItem_filter_PaymentOrBillingSettingDetail3</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_PaymentOrBillingSettingDetail</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_filter_PaymentOrBillingSettingDetail3.PaymentOrBillingSetting__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>var_PaymentOrBillingSettingId1</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail1</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>filter_PaymentOrBillingSettingDetail2</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>支払/請求設定明細をフィルタ</label>
        <locationX>452</locationX>
        <locationY>2211</locationY>
        <assignNextValueToReference>currentItem_filter_PaymentOrBillingSettingDetail3</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_PaymentOrBillingSettingDetail</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_filter_PaymentOrBillingSettingDetail3.PaymentOrBillingSetting__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>var_PaymentOrBillingSettingId2</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail2</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>filter_PaymentOrBillingSettingDetail3</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>支払/請求設定明細をフィルタ</label>
        <locationX>446</locationX>
        <locationY>2723</locationY>
        <assignNextValueToReference>currentItem_filter_PaymentOrBillingSettingDetail3</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_PaymentOrBillingSettingDetail</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_filter_PaymentOrBillingSettingDetail3.PaymentOrBillingSetting__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>var_PaymentOrBillingSettingId3</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail3</targetReference>
        </connector>
    </collectionProcessors>
    <decisions>
        <name>decision_Change</name>
        <label>変更判定</label>
        <locationX>584</locationX>
        <locationY>566</locationY>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>isChanged</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>get_Rent.Rent__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewRent__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.ManagementCharge__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewManagementCharge__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.CommonCharge__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewCommonCharge__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.ParkingFee__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewGarage__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.ContractOther1BillingAmount__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewOtherAmount1__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.ContractOther2BillingAmount__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewOtherAmount2__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.ContractOther3BillingAmount__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewOtherAmount3__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.ContractOther4BillingAmount__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewOtherAmount4__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.ContractOther5BillingAmount__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewOtherAmount5__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.ContractOther6BillingAmount__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewOtherAmount6__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.SeasonVariableCost1__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.SeasonVariableCost1__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.SeasonVariableCost2__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.SeasonVariableCost2__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.SeasonVariableCost3__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.SeasonVariableCost3__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.MonthlyVariableCost1Title__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.MonthlyVariableCost1Title__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.MonthlyVariableCost2Title__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.MonthlyVariableCost2Title__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.MonthlyVariableCost3Title__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.MonthlyVariableCost3Title__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.MonthlyVariableCost4Title__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.MonthlyVariableCost4Title__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.MonthlyVariableCost5Title__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.MonthlyVariableCost5Title__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.MonthlyVariableCost6Title__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.MonthlyVariableCost6Title__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.ContractEndDate__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewContractTermEndDate__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Rent.ContractStartDate__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>get_ConditionChange.NewContractTermStartDate__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_PaymentOrBillingSetting</targetReference>
            </connector>
            <label>変更あり</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_LoopCount</name>
        <label>ループカウント判定</label>
        <locationX>804</locationX>
        <locationY>1046</locationY>
        <defaultConnector>
            <targetReference>assign_Id3</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>カウント3</defaultConnectorLabel>
        <rules>
            <name>is1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_LoopCount</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_Id1</targetReference>
            </connector>
            <label>カウント1</label>
        </rules>
        <rules>
            <name>is2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_LoopCount</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>2.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_Id2</targetReference>
            </connector>
            <label>カウント2</label>
        </rules>
    </decisions>
    <description>ここからスプリント15</description>
    <environments>Default</environments>
    <formulas>
        <name>formula_EndDate</name>
        <dataType>Date</dataType>
        <expression>{!get_ConditionChange.NewContractTermStartDate__c} - 1</expression>
    </formulas>
    <formulas>
        <name>formula_TaxRateLoop1</name>
        <dataType>Number</dataType>
        <expression>VALUE({!formula_TaxRateTextLoop1})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>formula_TaxRateLoop2</name>
        <dataType>Number</dataType>
        <expression>VALUE({!formula_TaxRateTextLoop2})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>formula_TaxRateLoop3</name>
        <dataType>Number</dataType>
        <expression>VALUE({!formula_TaxRateTextLoop3})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>formula_TaxRateTextLoop1</name>
        <dataType>String</dataType>
        <expression>CASE(LEN(TEXT({!loop_FilterPaymentOrBillingSettingDetail1.TaxCategory__c})),
4,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail1.TaxCategory__c}),2),
3,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail1.TaxCategory__c}),1),
&quot;0&quot;
)</expression>
    </formulas>
    <formulas>
        <name>formula_TaxRateTextLoop2</name>
        <dataType>String</dataType>
        <expression>CASE(LEN(TEXT({!loop_FilterPaymentOrBillingSettingDetail2.TaxCategory__c})),
4,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail2.TaxCategory__c}),2),
3,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail2.TaxCategory__c}),1),
&quot;0&quot;
)</expression>
    </formulas>
    <formulas>
        <name>formula_TaxRateTextLoop3</name>
        <dataType>String</dataType>
        <expression>CASE(LEN(TEXT({!loop_FilterPaymentOrBillingSettingDetail3.TaxCategory__c})),
4,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail3.TaxCategory__c}),2),
3,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail3.TaxCategory__c}),1),
&quot;0&quot;
)</expression>
    </formulas>
    <interviewLabel>RE_家賃レコード作成（条件変更） {!$Flow.CurrentDateTime}</interviewLabel>
    <label>RE_家賃レコード作成（条件変更）</label>
    <loops>
        <name>loop_FilterPaymentOrBillingSettingDetail1</name>
        <label>支払/請求設定明細（フィルタ）ループ</label>
        <locationX>452</locationX>
        <locationY>1838</locationY>
        <collectionReference>filter_PaymentOrBillingSettingDetail1</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_RentDetail1</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>filter_PaymentOrBillingSettingDetail2</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_FilterPaymentOrBillingSettingDetail2</name>
        <label>支払/請求設定明細（フィルタ）ループ</label>
        <locationX>452</locationX>
        <locationY>2331</locationY>
        <collectionReference>filter_PaymentOrBillingSettingDetail2</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_RentDetail2</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>filter_PaymentOrBillingSettingDetail3</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_FilterPaymentOrBillingSettingDetail3</name>
        <label>支払/請求設定明細（フィルタ）ループ</label>
        <locationX>446</locationX>
        <locationY>2843</locationY>
        <collectionReference>filter_PaymentOrBillingSettingDetail3</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_RentDetail3</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>create_RentDetail</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_PaymentOrBillingSetting</name>
        <label>支払/請求設定ループ</label>
        <locationX>438</locationX>
        <locationY>3593</locationY>
        <collectionReference>get_PaymentOrBillingSetting</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_RentIdForPOBS</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>update_PaymentOrBillingSetting</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_PaymentOrBillingSettingIdAssign</name>
        <label>支払/請求設定ID割り当てループ</label>
        <locationX>452</locationX>
        <locationY>806</locationY>
        <collectionReference>get_PaymentOrBillingSetting</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_CountUp</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>create_Rent</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>create_Rent</name>
        <label>家賃レコード作成</label>
        <locationX>452</locationX>
        <locationY>1478</locationY>
        <assignRecordIdToReference>var_RentId</assignRecordIdToReference>
        <connector>
            <targetReference>get_PaymentOrBillingSettingDetail</targetReference>
        </connector>
        <inputAssignments>
            <field>CommonCharge__c</field>
            <value>
                <elementReference>get_ConditionChange.NewCommonCharge__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractEndDate__c</field>
            <value>
                <elementReference>get_ConditionChange.NewContractTermEndDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther1BillingAmount__c</field>
            <value>
                <elementReference>get_ConditionChange.NewOtherAmount1__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther1Title__c</field>
            <value>
                <elementReference>get_ConditionChange.OtherFields1__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther2BillingAmount__c</field>
            <value>
                <elementReference>get_ConditionChange.NewOtherAmount2__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther2Title__c</field>
            <value>
                <elementReference>get_ConditionChange.OtherFields2__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther3BillingAmount__c</field>
            <value>
                <elementReference>get_ConditionChange.NewOtherAmount3__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther3Title__c</field>
            <value>
                <elementReference>get_ConditionChange.OtherFields3__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther4BillingAmount__c</field>
            <value>
                <elementReference>get_ConditionChange.NewOtherAmount4__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther4Title__c</field>
            <value>
                <elementReference>get_ConditionChange.OtherFields4__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther5BillingAmount__c</field>
            <value>
                <elementReference>get_ConditionChange.NewOtherAmount5__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther5Title__c</field>
            <value>
                <elementReference>get_ConditionChange.OtherFields5__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther6BillingAmount__c</field>
            <value>
                <elementReference>get_ConditionChange.NewOtherAmount6__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther6Title__c</field>
            <value>
                <elementReference>get_ConditionChange.OtherFields6__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractStartDate__c</field>
            <value>
                <elementReference>get_ConditionChange.NewContractTermStartDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ManagementCharge__c</field>
            <value>
                <elementReference>get_ConditionChange.NewManagementCharge__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost1Title__c</field>
            <value>
                <elementReference>get_ConditionChange.MonthlyVariableCost1Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost2Title__c</field>
            <value>
                <elementReference>get_ConditionChange.MonthlyVariableCost2Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost3Title__c</field>
            <value>
                <elementReference>get_ConditionChange.MonthlyVariableCost3Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost4Title__c</field>
            <value>
                <elementReference>get_ConditionChange.MonthlyVariableCost4Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost5Title__c</field>
            <value>
                <elementReference>get_ConditionChange.MonthlyVariableCost5Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost6Title__c</field>
            <value>
                <elementReference>get_ConditionChange.MonthlyVariableCost6Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParkingFee__c</field>
            <value>
                <elementReference>get_ConditionChange.NewGarage__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PaymentEndDate__c</field>
            <value>
                <elementReference>get_ConditionChange.NewContractTermEndDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PaymentStartDate__c</field>
            <value>
                <elementReference>get_ConditionChange.NewContractTermStartDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RealEstateName__c</field>
            <value>
                <elementReference>get_ConditionChange.RealEstate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Rent__c</field>
            <value>
                <elementReference>get_ConditionChange.NewRent__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost1Title__c</field>
            <value>
                <elementReference>get_ConditionChange.SeasonVariableCost1Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost1__c</field>
            <value>
                <elementReference>get_ConditionChange.SeasonVariableCost1__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost2Title__c</field>
            <value>
                <elementReference>get_ConditionChange.SeasonVariableCost2Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost2__c</field>
            <value>
                <elementReference>get_ConditionChange.SeasonVariableCost2__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost3Title__c</field>
            <value>
                <elementReference>get_ConditionChange.SeasonVariableCost3Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost3__c</field>
            <value>
                <elementReference>get_ConditionChange.SeasonVariableCost3__c</elementReference>
            </value>
        </inputAssignments>
        <object>Rent__c</object>
    </recordCreates>
    <recordCreates>
        <name>create_RentDetail</name>
        <label>家賃明細レコード作成</label>
        <locationX>434</locationX>
        <locationY>3257</locationY>
        <connector>
            <targetReference>update_Rent</targetReference>
        </connector>
        <inputReference>varCol_RentDetail</inputReference>
    </recordCreates>
    <recordLookups>
        <name>get_ConditionChange</name>
        <label>条件変更レコードを取得</label>
        <locationX>584</locationX>
        <locationY>326</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Rent</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_DecisionApplication.ConditionChange__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ConditionChange__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_DecisionApplication</name>
        <label>決裁申請レコードを取得</label>
        <locationX>584</locationX>
        <locationY>206</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_ConditionChange</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>DecisionApplication2__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_PaymentOrBillingSetting</name>
        <label>支払/請求設定を取得</label>
        <locationX>452</locationX>
        <locationY>686</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>loop_PaymentOrBillingSettingIdAssign</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ConditionChange__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_ConditionChange.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>PaymentOrBillingType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>家賃</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>PaymentOrBillingSetting__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_PaymentOrBillingSettingDetail</name>
        <label>支払/請求設定明細を取得</label>
        <locationX>452</locationX>
        <locationY>1598</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>filter_PaymentOrBillingSettingDetail1</targetReference>
        </connector>
        <filterLogic>(1 OR 2 OR 3) AND 4</filterLogic>
        <filters>
            <field>PaymentOrBillingSetting__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_PaymentOrBillingSettingId1</elementReference>
            </value>
        </filters>
        <filters>
            <field>PaymentOrBillingSetting__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_PaymentOrBillingSettingId2</elementReference>
            </value>
        </filters>
        <filters>
            <field>PaymentOrBillingSetting__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_PaymentOrBillingSettingId3</elementReference>
            </value>
        </filters>
        <filters>
            <field>PaymentOrBillingSetting__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>PaymentOrBillingSettingDetail__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Rent</name>
        <label>家賃レコードを取得</label>
        <locationX>584</locationX>
        <locationY>446</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>decision_Change</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RealEstateName__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_ConditionChange.RealEstate__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Rent__c</object>
        <sortField>PaymentEndDate__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>update_PaymentOrBillingSetting</name>
        <label>支払/請求設定更新</label>
        <locationX>429</locationX>
        <locationY>3825</locationY>
        <inputReference>varCol_PaymentOrBillingSetting</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>update_Rent</name>
        <label>家賃レコード更新</label>
        <locationX>436</locationX>
        <locationY>3428</locationY>
        <connector>
            <targetReference>loop_PaymentOrBillingSetting</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Rent.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>ContractEndDate__c</field>
            <value>
                <elementReference>formula_EndDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PaymentEndDate__c</field>
            <value>
                <elementReference>formula_EndDate</elementReference>
            </value>
        </inputAssignments>
        <object>Rent__c</object>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <start>
        <locationX>458</locationX>
        <locationY>48</locationY>
        <connector>
            <targetReference>get_DecisionApplication</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>currentItem_filter_PaymentOrBillingSettingDetail3</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>PaymentOrBillingSettingDetail__c</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_BankAccountId1</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_BankAccountId2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_BankAccountId3</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_LoopCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>var_PaymentOrBillingSettingId1</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_PaymentOrBillingSettingId2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_PaymentOrBillingSettingId3</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Rent</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Rent__c</objectType>
    </variables>
    <variables>
        <name>var_RentDetail</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>RentDetail__c</objectType>
    </variables>
    <variables>
        <name>var_RentId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCol_PaymentOrBillingSetting</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>PaymentOrBillingSetting__c</objectType>
    </variables>
    <variables>
        <name>varCol_RentDetail</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>RentDetail__c</objectType>
    </variables>
</Flow>
