<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>assign_Collection1</name>
        <label>変数に割りあて</label>
        <locationX>672</locationX>
        <locationY>1958</locationY>
        <assignmentItems>
            <assignToReference>varCol_RentDetail</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_RentDetail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Collection1_0</name>
        <label>変数に割りあて</label>
        <locationX>672</locationX>
        <locationY>2534</locationY>
        <assignmentItems>
            <assignToReference>varCol_RentDetail</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_RentDetail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Collection1_0_0</name>
        <label>変数に割りあて</label>
        <locationX>672</locationX>
        <locationY>3110</locationY>
        <assignmentItems>
            <assignToReference>varCol_RentDetail</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_RentDetail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail3</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_CountUp</name>
        <label>カウントアップ</label>
        <locationX>949</locationX>
        <locationY>1021</locationY>
        <assignmentItems>
            <assignToReference>var_LoopCount</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>decision_LoopCount</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Id1</name>
        <label>ID1割り当て</label>
        <locationX>685</locationX>
        <locationY>1261</locationY>
        <assignmentItems>
            <assignToReference>var_PaymentOrBillingSettingId1</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_BankAccountId1</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.RemittanceDestination__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_PaymentOrBillingSettingIdAssign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Id2</name>
        <label>ID2割り当て</label>
        <locationX>949</locationX>
        <locationY>1261</locationY>
        <assignmentItems>
            <assignToReference>var_PaymentOrBillingSettingId2</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_BankAccountId2</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.RemittanceDestination__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_PaymentOrBillingSettingIdAssign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Id3</name>
        <label>ID3割り当て</label>
        <locationX>1213</locationX>
        <locationY>1261</locationY>
        <assignmentItems>
            <assignToReference>var_PaymentOrBillingSettingId3</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_BankAccountId3</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSettingIdAssign.RemittanceDestination__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_PaymentOrBillingSettingIdAssign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_RentDetail1</name>
        <label>変数に割りあて</label>
        <locationX>672</locationX>
        <locationY>1838</locationY>
        <assignmentItems>
            <assignToReference>var_RentDetail.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail1.Amount__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.HandlingType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>振込</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.CostCategory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail1.CostCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.BankAccount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_BankAccountId1</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItem__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail1.ExpenseItem__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.Rent__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RentId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.SeasonVariableCostOccurrenceMonth__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail1.SeasonVariableCostOccurrenceMonth__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.TaxRate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formula_TaxRateLoop1</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItemName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail1.ExpenseItemsName__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_Collection1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_RentDetail2</name>
        <label>変数に割りあて</label>
        <locationX>672</locationX>
        <locationY>2414</locationY>
        <assignmentItems>
            <assignToReference>var_RentDetail.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.Amount__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.HandlingType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>振込</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.CostCategory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.CostCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.BankAccount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_BankAccountId2</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItem__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.ExpenseItem__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.Rent__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RentId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.SeasonVariableCostOccurrenceMonth__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.SeasonVariableCostOccurrenceMonth__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.TaxRate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formula_TaxRateLoop2</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItemName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.ExpenseItemsName__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_Collection1_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_RentDetail3</name>
        <label>変数に割りあて</label>
        <locationX>672</locationX>
        <locationY>2990</locationY>
        <assignmentItems>
            <assignToReference>var_RentDetail.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail3.Amount__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.HandlingType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>振込</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.CostCategory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail3.CostCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.BankAccount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_BankAccountId3</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItem__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail3.ExpenseItem__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.Rent__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RentId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.SeasonVariableCostOccurrenceMonth__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail3.SeasonVariableCostOccurrenceMonth__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.TaxRate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formula_TaxRateLoop3</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RentDetail.ExpenseItemName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loop_FilterPaymentOrBillingSettingDetail2.ExpenseItemsName__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_Collection1_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_RentIdForPOBS</name>
        <label>家賃割り当て</label>
        <locationX>768</locationX>
        <locationY>3722</locationY>
        <assignmentItems>
            <assignToReference>loop_PaymentOrBillingSetting.Rent__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RentId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varCol_PaymentOrBillingSetting</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loop_PaymentOrBillingSetting</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_PaymentOrBillingSetting</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>filter_PaymentOrBillingSettingDetail1</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>支払/請求設定明細をフィルタ</label>
        <locationX>584</locationX>
        <locationY>1598</locationY>
        <assignNextValueToReference>currentItem_filter_PaymentOrBillingSettingDetail3</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_PaymentOrBillingSettingDetail</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_filter_PaymentOrBillingSettingDetail3.PaymentOrBillingSetting__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>var_PaymentOrBillingSettingId1</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail1</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>filter_PaymentOrBillingSettingDetail2</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>支払/請求設定明細をフィルタ</label>
        <locationX>584</locationX>
        <locationY>2174</locationY>
        <assignNextValueToReference>currentItem_filter_PaymentOrBillingSettingDetail3</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_PaymentOrBillingSettingDetail</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_filter_PaymentOrBillingSettingDetail3.PaymentOrBillingSetting__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>var_PaymentOrBillingSettingId2</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail2</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>filter_PaymentOrBillingSettingDetail3</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>支払/請求設定明細をフィルタ</label>
        <locationX>584</locationX>
        <locationY>2750</locationY>
        <assignNextValueToReference>currentItem_filter_PaymentOrBillingSettingDetail3</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_PaymentOrBillingSettingDetail</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_filter_PaymentOrBillingSettingDetail3.PaymentOrBillingSetting__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>var_PaymentOrBillingSettingId3</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>loop_FilterPaymentOrBillingSettingDetail3</targetReference>
        </connector>
    </collectionProcessors>
    <decisions>
        <name>decision_ContractDateDuplicate</name>
        <label>契約期間判定</label>
        <locationX>584</locationX>
        <locationY>3446</locationY>
        <defaultConnector>
            <targetReference>loop_PaymentOrBillingSetting</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>重複なし</defaultConnectorLabel>
        <rules>
            <name>isDuplicate</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Rent.PaymentEndDate__c</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>get_Renewal.NewContractTermStartDate__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Rent</targetReference>
            </connector>
            <label>期間重複</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_LoopCount</name>
        <label>ループカウント判定</label>
        <locationX>949</locationX>
        <locationY>1141</locationY>
        <defaultConnector>
            <targetReference>assign_Id3</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>カウント3</defaultConnectorLabel>
        <rules>
            <name>is1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_LoopCount</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_Id1</targetReference>
            </connector>
            <label>カウント1</label>
        </rules>
        <rules>
            <name>is2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_LoopCount</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>2.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_Id2</targetReference>
            </connector>
            <label>カウント2</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>formula_PaymentEndDate</name>
        <dataType>Date</dataType>
        <expression>{!get_Renewal.NewContractTermStartDate__c} -1</expression>
    </formulas>
    <formulas>
        <name>formula_TaxRateLoop1</name>
        <dataType>Number</dataType>
        <expression>VALUE({!formula_TaxRateTextLoop1})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>formula_TaxRateLoop2</name>
        <dataType>Number</dataType>
        <expression>VALUE({!formula_TaxRateTextLoop2})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>formula_TaxRateLoop3</name>
        <dataType>Number</dataType>
        <expression>VALUE({!formula_TaxRateTextLoop3})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>formula_TaxRateTextLoop1</name>
        <dataType>String</dataType>
        <expression>CASE(LEN(TEXT({!loop_FilterPaymentOrBillingSettingDetail1.TaxCategory__c})),
4,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail1.TaxCategory__c}),2),
3,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail1.TaxCategory__c}),1),
&quot;0&quot;
)</expression>
    </formulas>
    <formulas>
        <name>formula_TaxRateTextLoop2</name>
        <dataType>String</dataType>
        <expression>CASE(LEN(TEXT({!loop_FilterPaymentOrBillingSettingDetail2.TaxCategory__c})),
4,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail2.TaxCategory__c}),2),
3,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail2.TaxCategory__c}),1),
&quot;0&quot;
)</expression>
    </formulas>
    <formulas>
        <name>formula_TaxRateTextLoop3</name>
        <dataType>String</dataType>
        <expression>CASE(LEN(TEXT({!loop_FilterPaymentOrBillingSettingDetail3.TaxCategory__c})),
4,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail3.TaxCategory__c}),2),
3,RIGHT(TEXT({!loop_FilterPaymentOrBillingSettingDetail3.TaxCategory__c}),1),
&quot;0&quot;
)</expression>
    </formulas>
    <interviewLabel>RE_家賃レコード作成（更新） {!$Flow.CurrentDateTime}</interviewLabel>
    <label>RE_家賃レコード作成（更新）</label>
    <loops>
        <name>loop_FilterPaymentOrBillingSettingDetail1</name>
        <label>支払/請求設定明細（フィルタ）ループ</label>
        <locationX>584</locationX>
        <locationY>1718</locationY>
        <collectionReference>filter_PaymentOrBillingSettingDetail1</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_RentDetail1</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>filter_PaymentOrBillingSettingDetail2</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_FilterPaymentOrBillingSettingDetail2</name>
        <label>支払/請求設定明細（フィルタ）ループ</label>
        <locationX>584</locationX>
        <locationY>2294</locationY>
        <collectionReference>filter_PaymentOrBillingSettingDetail2</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_RentDetail2</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>filter_PaymentOrBillingSettingDetail3</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_FilterPaymentOrBillingSettingDetail3</name>
        <label>支払/請求設定明細（フィルタ）ループ</label>
        <locationX>584</locationX>
        <locationY>2870</locationY>
        <collectionReference>filter_PaymentOrBillingSettingDetail3</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_RentDetail3</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>create_RentDetail</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_PaymentOrBillingSetting</name>
        <label>支払/請求設定ループ</label>
        <locationX>591</locationX>
        <locationY>3721</locationY>
        <collectionReference>get_PaymentOrBillingSetting</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_RentIdForPOBS</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>update_PaymentOrBillingSetting</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loop_PaymentOrBillingSettingIdAssign</name>
        <label>支払/請求設定ID割り当てループ</label>
        <locationX>597</locationX>
        <locationY>901</locationY>
        <collectionReference>get_PaymentOrBillingSetting</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_CountUp</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>create_Rent</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>create_Rent</name>
        <label>家賃レコード作成</label>
        <locationX>584</locationX>
        <locationY>1358</locationY>
        <assignRecordIdToReference>var_RentId</assignRecordIdToReference>
        <connector>
            <targetReference>get_PaymentOrBillingSettingDetail</targetReference>
        </connector>
        <inputAssignments>
            <field>CommonCharge__c</field>
            <value>
                <elementReference>get_Renewal.NewCommonCharge__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractEndDate__c</field>
            <value>
                <elementReference>get_Renewal.NewContractTermEndDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther1BillingAmount__c</field>
            <value>
                <elementReference>get_Renewal.NewOther1Amount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther1Title__c</field>
            <value>
                <elementReference>get_Renewal.Other1ExpenseItems__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther2BillingAmount__c</field>
            <value>
                <elementReference>get_Renewal.NewOther2Amount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther2Title__c</field>
            <value>
                <elementReference>get_Renewal.Other2ExpenseItems__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther3BillingAmount__c</field>
            <value>
                <elementReference>get_Renewal.NewOther3Amount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther3Title__c</field>
            <value>
                <elementReference>get_Renewal.Other3ExpenseItems__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther4BillingAmount__c</field>
            <value>
                <elementReference>get_Renewal.NewOther4Amount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther4Title__c</field>
            <value>
                <elementReference>get_Renewal.Other4ExpenseItems__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther5BillingAmount__c</field>
            <value>
                <elementReference>get_Renewal.NewOther5Amount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther5Title__c</field>
            <value>
                <elementReference>get_Renewal.Other5ExpenseItems__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther6BillingAmount__c</field>
            <value>
                <elementReference>get_Renewal.NewOther6Amount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractOther6Title__c</field>
            <value>
                <elementReference>get_Renewal.Other6ExpenseItems__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContractStartDate__c</field>
            <value>
                <elementReference>get_Renewal.NewContractTermStartDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ManagementCharge__c</field>
            <value>
                <elementReference>get_Renewal.NewManagementCharge__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost1Title__c</field>
            <value>
                <elementReference>get_Renewal.MonthlyVariableCost1Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost2Title__c</field>
            <value>
                <elementReference>get_Renewal.MonthlyVariableCost2Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost3Title__c</field>
            <value>
                <elementReference>get_Renewal.MonthlyVariableCost3Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost4Title__c</field>
            <value>
                <elementReference>get_Renewal.MonthlyVariableCost4Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost5Title__c</field>
            <value>
                <elementReference>get_Renewal.MonthlyVariableCost5Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MonthlyVariableCost6Title__c</field>
            <value>
                <elementReference>get_Renewal.MonthlyVariableCost6Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParkingFee__c</field>
            <value>
                <elementReference>get_Renewal.NewGarage__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PaymentEndDate__c</field>
            <value>
                <elementReference>get_Renewal.NewContractTermEndDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PaymentStartDate__c</field>
            <value>
                <elementReference>get_Renewal.NewContractTermStartDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RealEstateName__c</field>
            <value>
                <elementReference>get_Renewal.RealEstate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Rent__c</field>
            <value>
                <elementReference>get_Renewal.NewRent__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost1Title__c</field>
            <value>
                <elementReference>get_Renewal.SeasonVariableCost1Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost1__c</field>
            <value>
                <elementReference>get_Renewal.SeasonVariableCost1__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost2Title__c</field>
            <value>
                <elementReference>get_Renewal.SeasonVariableCost2Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost2__c</field>
            <value>
                <elementReference>get_Renewal.SeasonVariableCost2__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost3Title__c</field>
            <value>
                <elementReference>get_Renewal.SeasonVariableCost3Title__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SeasonVariableCost3__c</field>
            <value>
                <elementReference>get_Renewal.SeasonVariableCost3__c</elementReference>
            </value>
        </inputAssignments>
        <object>Rent__c</object>
    </recordCreates>
    <recordCreates>
        <name>create_RentDetail</name>
        <label>家賃明細レコード作成</label>
        <locationX>584</locationX>
        <locationY>3326</locationY>
        <connector>
            <targetReference>decision_ContractDateDuplicate</targetReference>
        </connector>
        <inputReference>varCol_RentDetail</inputReference>
    </recordCreates>
    <recordLookups>
        <name>get_DecisionApplication</name>
        <label>決裁申請レコードを取得</label>
        <locationX>584</locationX>
        <locationY>206</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Renewal</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>DecisionApplication2__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_PaymentOrBillingSetting</name>
        <label>支払/請求設定を取得</label>
        <locationX>586</locationX>
        <locationY>660</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>loop_PaymentOrBillingSettingIdAssign</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Renewal__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Renewal.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>PaymentOrBillingType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>家賃</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>PaymentOrBillingSetting__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_PaymentOrBillingSettingDetail</name>
        <label>支払/請求設定明細取得</label>
        <locationX>584</locationX>
        <locationY>1478</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>filter_PaymentOrBillingSettingDetail1</targetReference>
        </connector>
        <filterLogic>(1 OR 2 OR 3) AND 4</filterLogic>
        <filters>
            <field>PaymentOrBillingSetting__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_PaymentOrBillingSettingId1</elementReference>
            </value>
        </filters>
        <filters>
            <field>PaymentOrBillingSetting__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_PaymentOrBillingSettingId2</elementReference>
            </value>
        </filters>
        <filters>
            <field>PaymentOrBillingSetting__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_PaymentOrBillingSettingId3</elementReference>
            </value>
        </filters>
        <filters>
            <field>PaymentOrBillingSetting__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>PaymentOrBillingSettingDetail__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Renewal</name>
        <label>更新レコードを取得</label>
        <locationX>584</locationX>
        <locationY>326</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Rent</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_DecisionApplication.Renewal__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Renewal__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Rent</name>
        <label>家賃レコードを取得</label>
        <locationX>584</locationX>
        <locationY>500</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_PaymentOrBillingSetting</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RealEstateName__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Renewal.RealEstate__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Rent__c</object>
        <sortField>PaymentEndDate__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>update_PaymentOrBillingSetting</name>
        <label>支払/請求設定更新</label>
        <locationX>590</locationX>
        <locationY>3910</locationY>
        <inputReference>varCol_PaymentOrBillingSetting</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>update_Rent</name>
        <label>家賃レコード更新</label>
        <locationX>452</locationX>
        <locationY>3566</locationY>
        <connector>
            <targetReference>loop_PaymentOrBillingSetting</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Rent.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>PaymentEndDate__c</field>
            <value>
                <elementReference>formula_PaymentEndDate</elementReference>
            </value>
        </inputAssignments>
        <object>Rent__c</object>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <start>
        <locationX>458</locationX>
        <locationY>48</locationY>
        <connector>
            <targetReference>get_DecisionApplication</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>currentItem_filter_PaymentOrBillingSettingDetail3</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>PaymentOrBillingSettingDetail__c</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_BankAccountId1</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_BankAccountId2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_BankAccountId3</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_LoopCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>var_PaymentOrBillingSettingId1</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_PaymentOrBillingSettingId2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_PaymentOrBillingSettingId3</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Rent</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Rent__c</objectType>
    </variables>
    <variables>
        <name>var_RentDetail</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>RentDetail__c</objectType>
    </variables>
    <variables>
        <name>var_RentId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCol_PaymentOrBillingSetting</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>PaymentOrBillingSetting__c</objectType>
    </variables>
    <variables>
        <name>varCol_RentDetail</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>RentDetail__c</objectType>
    </variables>
</Flow>
