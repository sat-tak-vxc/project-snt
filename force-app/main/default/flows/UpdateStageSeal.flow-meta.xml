<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>54.0</apiVersion>
    <decisions>
        <name>decision_Stage</name>
        <label>フェーズ判定</label>
        <locationX>775</locationX>
        <locationY>1333</locationY>
        <defaultConnector>
            <targetReference>decision_Stage2</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>決裁取得日に値がない、または紐づく書類いずれかに初回受領日に値が入っている</defaultConnectorLabel>
        <rules>
            <name>isUpdate3_0</name>
            <conditionLogic>2 AND (1 OR 3 OR 4 OR 5 OR 6 OR 7)</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.CancelCalculate__r.DecisionAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_AcceptDocument</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.Case__r.DecisionAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.New__r.DecisionAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.ConditionChange__r.DecisionApplicationAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.Renewal__r.DecisionAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.Change__r.DecisionAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal_0_0_0_0_0_0</targetReference>
            </connector>
            <label>決裁取得日に値があり、かつ紐づくすべての書類の初回受領日が空欄</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_Stage10</name>
        <label>フェーズ判定</label>
        <locationX>792</locationX>
        <locationY>3347</locationY>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>isUpdate10</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.CompletedDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.CloseReason__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal5_0_0_0</targetReference>
            </connector>
            <label>完了に更新</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_Stage2</name>
        <label>フェーズ判定</label>
        <locationX>774</locationX>
        <locationY>1695</locationY>
        <defaultConnector>
            <targetReference>decision_Stage4</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>isUpdate3_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_AcceptDocument</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.ContentConfirmFinishDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal_0_0_0_0_0_0_0</targetReference>
            </connector>
            <label>受領済みに更新</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_Stage4</name>
        <label>フェーズ判定</label>
        <locationX>777</locationX>
        <locationY>2057</locationY>
        <defaultConnector>
            <targetReference>decision_Stage8</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>isUpdate3_0_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.ContentConfirmFinishDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.DocumentSendingDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal5</targetReference>
            </connector>
            <label>内容確認中</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_Stage8</name>
        <label>フェーズ判定</label>
        <locationX>782</locationX>
        <locationY>2491</locationY>
        <defaultConnector>
            <targetReference>decision_Stage9</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>isUpdate8</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.DocumentSendingDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.BrrowerReceiptCollectDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal5_0</targetReference>
            </connector>
            <label>締結中に更新</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_Stage9</name>
        <label>フェーズ判定</label>
        <locationX>788</locationX>
        <locationY>2924</locationY>
        <defaultConnector>
            <targetReference>decision_Stage10</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>isUpdate9</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.BrrowerReceiptCollectDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.CompletedDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal5_0_0</targetReference>
            </connector>
            <label>締結完了に更新</label>
        </rules>
    </decisions>
    <decisions>
        <name>dicision_RecordType</name>
        <label>レコードタイプ判別</label>
        <locationX>769</locationX>
        <locationY>481</locationY>
        <defaultConnector>
            <targetReference>get_AcceptDocument</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>デフォルトの結果</defaultConnectorLabel>
        <rules>
            <name>isCase</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Case</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.Case__r.DecisionAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal</targetReference>
            </connector>
            <label>ケース</label>
        </rules>
        <rules>
            <name>isCancel</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cancel</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.CancelCalculate__r.DecisionAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal</targetReference>
            </connector>
            <label>解約</label>
        </rules>
        <rules>
            <name>isRenewal</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Renewal</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.Renewal__r.DecisionAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal</targetReference>
            </connector>
            <label>更新</label>
        </rules>
        <rules>
            <name>isConditionChange</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ConditionChange</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.ConditionChange__r.DecisionApplicationAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal</targetReference>
            </connector>
            <label>条件変更</label>
        </rules>
        <rules>
            <name>isNewMatter</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>NewMatter</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.New__r.DecisionAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal</targetReference>
            </connector>
            <label>新規</label>
        </rules>
        <rules>
            <name>isChange</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Seal.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Change</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>get_Seal.Change__r.DecisionAcquisitionDate__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Seal</targetReference>
            </connector>
            <label>入替</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <interviewLabel>SE_フェーズ自動更新（捺印管理） {!$Flow.CurrentDateTime}</interviewLabel>
    <label>SE_フェーズ自動更新（捺印管理）</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>get_AcceptDocument</name>
        <label>初回受領日に値がある書類レコード取得</label>
        <locationX>778</locationX>
        <locationY>954</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>decision_Stage</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Seal__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>AcceptDate__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Document__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Seal</name>
        <label>捺印管理レコードを取得</label>
        <locationX>776</locationX>
        <locationY>203</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>dicision_RecordType</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Seal__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>update_Seal</name>
        <label>レコード更新</label>
        <locationX>594</locationX>
        <locationY>734</locationY>
        <connector>
            <targetReference>get_AcceptDocument</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Seal.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Stage__c</field>
            <value>
                <stringValue>決裁取得待ち</stringValue>
            </value>
        </inputAssignments>
        <object>Seal__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>update_Seal5</name>
        <label>レコード更新</label>
        <locationX>655</locationX>
        <locationY>2281</locationY>
        <connector>
            <targetReference>decision_Stage8</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Seal.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Stage__c</field>
            <value>
                <stringValue>内容確認中</stringValue>
            </value>
        </inputAssignments>
        <object>Seal__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>update_Seal5_0</name>
        <label>レコード更新</label>
        <locationX>663</locationX>
        <locationY>2724</locationY>
        <connector>
            <targetReference>decision_Stage9</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Seal.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Stage__c</field>
            <value>
                <stringValue>締結中</stringValue>
            </value>
        </inputAssignments>
        <object>Seal__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>update_Seal5_0_0</name>
        <label>レコード更新</label>
        <locationX>684</locationX>
        <locationY>3155</locationY>
        <connector>
            <targetReference>decision_Stage10</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Seal.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Stage__c</field>
            <value>
                <stringValue>締結完了</stringValue>
            </value>
        </inputAssignments>
        <object>Seal__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>update_Seal5_0_0_0</name>
        <label>レコード更新</label>
        <locationX>800</locationX>
        <locationY>3537</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Seal.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Stage__c</field>
            <value>
                <stringValue>完了</stringValue>
            </value>
        </inputAssignments>
        <object>Seal__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>update_Seal_0_0_0_0_0_0</name>
        <label>レコード更新</label>
        <locationX>647</locationX>
        <locationY>1479</locationY>
        <connector>
            <targetReference>decision_Stage2</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Seal.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Stage__c</field>
            <value>
                <stringValue>契約書類待ち</stringValue>
            </value>
        </inputAssignments>
        <object>Seal__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>update_Seal_0_0_0_0_0_0_0</name>
        <label>レコード更新</label>
        <locationX>646</locationX>
        <locationY>1898</locationY>
        <connector>
            <targetReference>decision_Stage4</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Seal.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Stage__c</field>
            <value>
                <stringValue>受領済み</stringValue>
            </value>
        </inputAssignments>
        <object>Seal__c</object>
    </recordUpdates>
    <start>
        <locationX>650</locationX>
        <locationY>55</locationY>
        <connector>
            <targetReference>get_Seal</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>a</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
