<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>assign_RealEstateId</name>
        <label>物件Idを割りあて</label>
        <locationX>790</locationX>
        <locationY>610</locationY>
        <assignmentItems>
            <assignToReference>loop_RelationRealEstate.RealEstate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_RealEstateId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varCol_Resident</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loop_RelationRealEstate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loop_RelationRealEstate</targetReference>
        </connector>
    </assignments>
    <environments>Default</environments>
    <formulas>
        <name>formula_DelStateManagementCompanyAdress</name>
        <dataType>String</dataType>
        <expression>RIGHT({!var_TemporaryManagementCompanyAdress} , LEN({!var_TemporaryManagementCompanyAdress}) - LEN({!var_StateManagementCompanyAdress}))</expression>
    </formulas>
    <formulas>
        <name>formula_DelStateOwnerAdress</name>
        <dataType>String</dataType>
        <expression>RIGHT({!var_TemporaryOwnerAdress} , LEN({!var_TemporaryOwnerAdress}) - LEN({!var_StateOwnerAdress}))</expression>
    </formulas>
    <formulas>
        <name>formula_DelStateOwnerAdress2</name>
        <dataType>String</dataType>
        <expression>RIGHT({!var_TemporaryOwnerAdress2} , LEN({!var_TemporaryOwnerAdress2}) - LEN({!var_StateOwnerAdress2}))</expression>
    </formulas>
    <formulas>
        <name>formula_DelStateOwnerAdress3</name>
        <dataType>String</dataType>
        <expression>RIGHT({!var_TemporaryOwnerAdress3} , LEN({!var_TemporaryOwnerAdress3}) - LEN({!var_StateOwnerAdress3}))</expression>
    </formulas>
    <formulas>
        <name>formula_DelStateOwnerAdress4</name>
        <dataType>String</dataType>
        <expression>RIGHT({!var_TemporaryOwnerAdress4} , LEN({!var_TemporaryOwnerAdress4}) - LEN({!var_StateOwnerAdress4}))</expression>
    </formulas>
    <formulas>
        <name>formula_DelStateOwnerAdress5</name>
        <dataType>String</dataType>
        <expression>RIGHT({!var_TemporaryOwnerAdress5} , LEN({!var_TemporaryOwnerAdress5}) - LEN({!var_StateOwnerAdress5}))</expression>
    </formulas>
    <formulas>
        <name>formula_DelStateOwnerProxyAdress</name>
        <dataType>String</dataType>
        <expression>RIGHT({!var_TemporaryOwnerProxyAdress} , LEN({!var_TemporaryOwnerProxyAdress}) - LEN({!var_StateOwnerProxyAdress}))</expression>
    </formulas>
    <formulas>
        <name>formula_StateManagementCompanyAdress</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!var_TemporaryManagementCompanyAdress}),null,IF(CONTAINS({!var_TemporaryManagementCompanyAdress}, &apos;東京都&apos;),LEFT({!var_TemporaryManagementCompanyAdress}, FIND(&apos;都&apos;,{!var_TemporaryManagementCompanyAdress})),IF(OR(CONTAINS({!var_TemporaryManagementCompanyAdress}, &apos;京都府&apos;),CONTAINS({!var_TemporaryManagementCompanyAdress}, &apos;大阪府&apos;)),LEFT({!var_TemporaryManagementCompanyAdress}, FIND(&apos;府&apos;, {!var_TemporaryManagementCompanyAdress})),IF(CONTAINS({!var_TemporaryManagementCompanyAdress}, &apos;北海道&apos;),LEFT({!var_TemporaryManagementCompanyAdress},FIND(&apos;道&apos;, {!var_TemporaryManagementCompanyAdress})),LEFT({!var_TemporaryManagementCompanyAdress}, FIND(&apos;県&apos;, {!var_TemporaryManagementCompanyAdress}))))))</expression>
    </formulas>
    <formulas>
        <name>formula_StateOwnerAdress</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!var_TemporaryOwnerAdress}),
null,
IF(CONTAINS({!var_TemporaryOwnerAdress}, &apos;東京都&apos;),
LEFT({!var_TemporaryOwnerAdress}, FIND(&apos;都&apos;, {!var_TemporaryOwnerAdress})),
IF(OR(CONTAINS({!var_TemporaryOwnerAdress}, &apos;京都府&apos;),CONTAINS({!var_TemporaryOwnerAdress}, &apos;大阪府&apos;)),
LEFT({!var_TemporaryOwnerAdress}, FIND(&apos;府&apos;, {!var_TemporaryOwnerAdress})),
IF(CONTAINS({!var_TemporaryOwnerAdress}, &apos;北海道&apos;),
LEFT({!var_TemporaryOwnerAdress}, FIND(&apos;道&apos;, {!var_TemporaryOwnerAdress})),
LEFT({!var_TemporaryOwnerAdress}, FIND(&apos;県&apos;, {!var_TemporaryOwnerAdress}))
))))</expression>
    </formulas>
    <formulas>
        <name>formula_StateOwnerAdress2</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!var_TemporaryOwnerAdress2}),null,IF(CONTAINS({!var_TemporaryOwnerAdress2}, &apos;東京都&apos;),LEFT({!var_TemporaryOwnerAdress2}, FIND(&apos;都&apos;,{!var_TemporaryOwnerAdress2})),IF(OR(CONTAINS({!var_TemporaryOwnerAdress2}, &apos;京都府&apos;),CONTAINS({!var_TemporaryOwnerAdress2}, &apos;大阪府&apos;)),LEFT({!var_TemporaryOwnerAdress2}, FIND(&apos;府&apos;, {!var_TemporaryOwnerAdress2})),IF(CONTAINS({!var_TemporaryOwnerAdress2}, &apos;北海道&apos;),LEFT({!var_TemporaryOwnerAdress2},FIND(&apos;道&apos;, {!var_TemporaryOwnerAdress2})),LEFT({!var_TemporaryOwnerAdress2}, FIND(&apos;県&apos;, {!var_TemporaryOwnerAdress2}))))))</expression>
    </formulas>
    <formulas>
        <name>formula_StateOwnerAdress3</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!var_TemporaryOwnerAdress3}),null,IF(CONTAINS({!var_TemporaryOwnerAdress3}, &apos;東京都&apos;),LEFT({!var_TemporaryOwnerAdress3}, FIND(&apos;都&apos;,{!var_TemporaryOwnerAdress3})),IF(OR(CONTAINS({!var_TemporaryOwnerAdress3}, &apos;京都府&apos;),CONTAINS({!var_TemporaryOwnerAdress3}, &apos;大阪府&apos;)),LEFT({!var_TemporaryOwnerAdress3}, FIND(&apos;府&apos;, {!var_TemporaryOwnerAdress3})),IF(CONTAINS({!var_TemporaryOwnerAdress3}, &apos;北海道&apos;),LEFT({!var_TemporaryOwnerAdress3},FIND(&apos;道&apos;, {!var_TemporaryOwnerAdress3})),LEFT({!var_TemporaryOwnerAdress3}, FIND(&apos;県&apos;, {!var_TemporaryOwnerAdress3}))))))</expression>
    </formulas>
    <formulas>
        <name>formula_StateOwnerAdress4</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!var_TemporaryOwnerAdress4}),null,IF(CONTAINS({!var_TemporaryOwnerAdress4}, &apos;東京都&apos;),LEFT({!var_TemporaryOwnerAdress4}, FIND(&apos;都&apos;,{!var_TemporaryOwnerAdress4})),IF(OR(CONTAINS({!var_TemporaryOwnerAdress4}, &apos;京都府&apos;),CONTAINS({!var_TemporaryOwnerAdress4}, &apos;大阪府&apos;)),LEFT({!var_TemporaryOwnerAdress4}, FIND(&apos;府&apos;, {!var_TemporaryOwnerAdress4})),IF(CONTAINS({!var_TemporaryOwnerAdress4}, &apos;北海道&apos;),LEFT({!var_TemporaryOwnerAdress4},FIND(&apos;道&apos;, {!var_TemporaryOwnerAdress4})),LEFT({!var_TemporaryOwnerAdress4}, FIND(&apos;県&apos;, {!var_TemporaryOwnerAdress4}))))))</expression>
    </formulas>
    <formulas>
        <name>formula_StateOwnerAdress5</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!var_TemporaryOwnerAdress5}),null,IF(CONTAINS({!var_TemporaryOwnerAdress5}, &apos;東京都&apos;),LEFT({!var_TemporaryOwnerAdress5}, FIND(&apos;都&apos;,{!var_TemporaryOwnerAdress5})),IF(OR(CONTAINS({!var_TemporaryOwnerAdress5}, &apos;京都府&apos;),CONTAINS({!var_TemporaryOwnerAdress5}, &apos;大阪府&apos;)),LEFT({!var_TemporaryOwnerAdress5}, FIND(&apos;府&apos;, {!var_TemporaryOwnerAdress5})),IF(CONTAINS({!var_TemporaryOwnerAdress5}, &apos;北海道&apos;),LEFT({!var_TemporaryOwnerAdress5},FIND(&apos;道&apos;, {!var_TemporaryOwnerAdress5})),LEFT({!var_TemporaryOwnerAdress5}, FIND(&apos;県&apos;, {!var_TemporaryOwnerAdress5}))))))</expression>
    </formulas>
    <formulas>
        <name>formula_StateOwnerProxyAdress</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!var_TemporaryOwnerProxyAdress}),null,IF(CONTAINS({!var_TemporaryOwnerProxyAdress}, &apos;東京都&apos;),LEFT({!var_TemporaryOwnerProxyAdress}, FIND(&apos;都&apos;,{!var_TemporaryOwnerProxyAdress})),IF(OR(CONTAINS({!var_TemporaryOwnerProxyAdress}, &apos;京都府&apos;),CONTAINS({!var_TemporaryOwnerProxyAdress}, &apos;大阪府&apos;)),LEFT({!var_TemporaryOwnerProxyAdress}, FIND(&apos;府&apos;, {!var_TemporaryOwnerProxyAdress})),IF(CONTAINS({!var_TemporaryOwnerProxyAdress}, &apos;北海道&apos;),LEFT({!var_TemporaryOwnerProxyAdress},FIND(&apos;道&apos;, {!var_TemporaryOwnerProxyAdress})),LEFT({!var_TemporaryOwnerProxyAdress}, FIND(&apos;県&apos;, {!var_TemporaryOwnerProxyAdress}))))))</expression>
    </formulas>
    <interviewLabel>RE_入居者を物件に紐づけ {!$Flow.CurrentDateTime}</interviewLabel>
    <label>RE_入居者を物件に紐づけ（新規）</label>
    <loops>
        <name>loop_RelationRealEstate</name>
        <label>物件紐づけ</label>
        <locationX>589</locationX>
        <locationY>575</locationY>
        <collectionReference>get_Resident</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>assign_RealEstateId</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>update_Resident</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>get_DecisionApplication</name>
        <label>決裁申請レコードを取得</label>
        <locationX>584</locationX>
        <locationY>206</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_NewMatter</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>DecisionApplication2__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_NewMatter</name>
        <label>新規レコードを取得</label>
        <locationX>584</locationX>
        <locationY>326</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Resident</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_DecisionApplication.NewMatter__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NewMatter__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Resident</name>
        <label>入居者を取得</label>
        <locationX>584</locationX>
        <locationY>446</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>loop_RelationRealEstate</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Application__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_NewMatter.Application__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Application__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Resident__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>update_Resident</name>
        <label>入居者を更新</label>
        <locationX>590</locationX>
        <locationY>743</locationY>
        <inputReference>varCol_Resident</inputReference>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <start>
        <locationX>458</locationX>
        <locationY>48</locationY>
        <connector>
            <targetReference>get_DecisionApplication</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_AccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Landlord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Landlord__c</objectType>
    </variables>
    <variables>
        <name>var_RealEstateId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StateManagementCompanyAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StateOwnerAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StateOwnerAdress2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StateOwnerAdress3</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StateOwnerAdress4</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StateOwnerAdress5</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StateOwnerProxyAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StreetManagementCompanyAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StreetOwnerAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StreetOwnerAdress2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StreetOwnerAdress3</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StreetOwnerAdress4</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StreetOwnerAdress5</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_StreetOwnerProxyAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_TemporaryManagementCompanyAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_TemporaryOwnerAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_TemporaryOwnerAdress2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_TemporaryOwnerAdress3</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_TemporaryOwnerAdress4</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_TemporaryOwnerAdress5</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_TemporaryOwnerProxyAdress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCol_Resident</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Resident__c</objectType>
    </variables>
</Flow>
